
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>使用 Docker 进行部署 · 简明 ASP.NET Core 手册</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Nate Barbettini">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-forkmegithub/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../conclusion/" />
    
    
    <link rel="prev" href="deploy-to-azure.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../your-first-application/">
            
                <a href="../your-first-application/">
            
                    
                    你的第一个程序
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../your-first-application/get-the-sdk.html">
            
                <a href="../your-first-application/get-the-sdk.html">
            
                    
                    获取 SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../your-first-application/hello-world-in-csharp.html">
            
                <a href="../your-first-application/hello-world-in-csharp.html">
            
                    
                    C# 版的 Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../your-first-application/create-aspnetcore-project.html">
            
                <a href="../your-first-application/create-aspnetcore-project.html">
            
                    
                    创建一个 ASP.NET Core 项目
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../mvc-basics/">
            
                <a href="../mvc-basics/">
            
                    
                    MVC 基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../mvc-basics/create-controller.html">
            
                <a href="../mvc-basics/create-controller.html">
            
                    
                    创建控制器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../mvc-basics/create-models.html">
            
                <a href="../mvc-basics/create-models.html">
            
                    
                    创建模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../mvc-basics/create-view.html">
            
                <a href="../mvc-basics/create-view.html">
            
                    
                    创建视图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../mvc-basics/add-service-class.html">
            
                <a href="../mvc-basics/add-service-class.html">
            
                    
                    添加一个服务类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../mvc-basics/use-dependency-injection.html">
            
                <a href="../mvc-basics/use-dependency-injection.html">
            
                    
                    运用依赖注入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../mvc-basics/finish-controller.html">
            
                <a href="../mvc-basics/finish-controller.html">
            
                    
                    完成控制器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../add-external-packages/">
            
                <a href="../add-external-packages/">
            
                    
                    添加外来软件包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../use-a-database/">
            
                <a href="../use-a-database/">
            
                    
                    运用数据库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../use-a-database/connect-to-a-database.html">
            
                <a href="../use-a-database/connect-to-a-database.html">
            
                    
                    连接数据库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../use-a-database/update-context.html">
            
                <a href="../use-a-database/update-context.html">
            
                    
                    修改数据库上下文
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../use-a-database/create-migration.html">
            
                <a href="../use-a-database/create-migration.html">
            
                    
                    创建变更
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../use-a-database/create-service-class.html">
            
                <a href="../use-a-database/create-service-class.html">
            
                    
                    创建服务类
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../add-more-features/">
            
                <a href="../add-more-features/">
            
                    
                    添加新特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../add-more-features/add-todo-items.html">
            
                <a href="../add-more-features/add-todo-items.html">
            
                    
                    添加 待办事项 条目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../add-more-features/complete-with-checkbox.html">
            
                <a href="../add-more-features/complete-with-checkbox.html">
            
                    
                    使用复选框标记条目完成
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../security-and-identity/">
            
                <a href="../security-and-identity/">
            
                    
                    安全和身份
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../security-and-identity/add-facebook-login.html">
            
                <a href="../security-and-identity/add-facebook-login.html">
            
                    
                    添加 Facebook 登录功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../security-and-identity/require-authentication.html">
            
                <a href="../security-and-identity/require-authentication.html">
            
                    
                    提示认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../security-and-identity/using-identity-in-the-application.html">
            
                <a href="../security-and-identity/using-identity-in-the-application.html">
            
                    
                    在程序中使用身份
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../security-and-identity/authorization-with-roles.html">
            
                <a href="../security-and-identity/authorization-with-roles.html">
            
                    
                    按角色进行授权
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../automated-testing/">
            
                <a href="../automated-testing/">
            
                    
                    自动化测试
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../automated-testing/unit-testing.html">
            
                <a href="../automated-testing/unit-testing.html">
            
                    
                    单元测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../automated-testing/integration-testing.html">
            
                <a href="../automated-testing/integration-testing.html">
            
                    
                    集成测试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="./">
            
                <a href="./">
            
                    
                    部署程序
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="deploy-to-azure.html">
            
                <a href="deploy-to-azure.html">
            
                    
                    部署到 Azure
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9.2" data-path="deploy-with-docker.html">
            
                <a href="deploy-with-docker.html">
            
                    
                    使用 Docker 进行部署
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../conclusion/">
            
                <a href="../conclusion/">
            
                    
                    结束语
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >使用 Docker 进行部署</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="&#x4F7F;&#x7528;-docker-&#x8FDB;&#x884C;&#x90E8;&#x7F72;"><a name="&#x4F7F;&#x7528;-docker-&#x8FDB;&#x884C;&#x90E8;&#x7F72;" class="plugin-anchor" href="#&#x4F7F;&#x7528;-docker-&#x8FDB;&#x884C;&#x90E8;&#x7F72;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4F7F;&#x7528; Docker &#x8FDB;&#x884C;&#x90E8;&#x7F72;</h2>
<p>&#x50CF; Docker &#x8FD9;&#x6837;&#x7684;&#x5BB9;&#x5668;&#x5316;&#x6280;&#x672F;&#x6781;&#x5927;&#x5730;&#x7B80;&#x5316;&#x4E86; web &#x7A0B;&#x5E8F;&#x7684;&#x90E8;&#x7F72;&#x5DE5;&#x4F5C;&#x3002;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x6D6A;&#x8D39;&#x65F6;&#x95F4;&#x5728;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;&#x4F60;&#x7A0B;&#x5E8F;&#x6240;&#x9700;&#x7684;&#x4F9D;&#x8D56;&#x3001;&#x590D;&#x5236;&#x6587;&#x4EF6;&#x3001;&#x91CD;&#x542F;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; Docker &#x955C;&#x50CF;&#xFF0C;&#x91CC;&#x9762;&#x5305;&#x542B;&#x4F60;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x6240;&#x9700;&#x7684;&#x4E00;&#x5207;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4EFB;&#x4F55; Docker &#x5BBF;&#x4E3B;&#x673A;&#x4E0A;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x8D77;&#x6765;&#x5C31;&#x884C;&#x4E86;&#x3002;</p>
<p>Docker &#x4E5F;&#x4FBF;&#x4E8E;&#x628A;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x6269;&#x5C55;&#x4E3A;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x3002;&#x4E00;&#x65E6;&#x4F60;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x7528;&#x5B83;&#x6765;&#x521B;&#x5EFA; 1 &#x4E2A;&#x5BB9;&#x5668;&#x548C; 100 &#x4E2A;&#x5BB9;&#x5668;&#x6240;&#x9700;&#x8981;&#x7684;&#x5DE5;&#x4F5C;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>
<p>&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x4F60;&#x7684;&#x5F00;&#x53D1;&#x673A;&#x4E0A;&#x5B89;&#x88C5; Docker CLI&#x3002;&#x641C;&#x7D22; &quot;get docker for (mac/windows/linux)&quot; &#x5E76;&#x6267;&#x884C; Docker &#x5B98;&#x7F51;&#x7684;&#x63D0;&#x793A;&#x3002;&#x8981;&#x68C0;&#x9A8C;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF0C;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#xFF1A;</p>
<pre><code>docker --version
</code></pre><blockquote>
<p>&#x5982;&#x679C;&#x4F60;&#x5728; <em>&#x5B89;&#x5168;&#x4E0E;&#x8EAB;&#x4EFD;</em> &#x7AE0;&#x8282;&#x914D;&#x7F6E;&#x8FC7; Facebook &#x767B;&#x5F55;&#xFF0C;&#x4F60;&#x5C06;&#x9700;&#x8981;&#x4F7F;&#x7528; Docker secrets &#x6765;&#x5B89;&#x5168;&#x5730;&#x628A; Facebook &#x5E94;&#x7528;&#x4FE1;&#x606F;&#x653E;&#x7F6E;&#x8FDB;&#x5BB9;&#x5668;&#x91CC;&#x3002;Docker secrets &#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x8D85;&#x51FA;&#x4E86;&#x672C;&#x4E66;&#x7684;&#x8303;&#x7574;&#x3002;&#x5982;&#x679C;&#x4F60;&#x613F;&#x610F;&#xFF0C;&#x53EF;&#x4EE5;&#x5728; <code>ConfigureServices</code> &#x65B9;&#x6CD5;&#x91CC;&#x6CE8;&#x91CA;&#x6389; <code>AddFacebook</code> &#x90A3;&#x4E00;&#x884C;&#xFF0C;&#x4EE5;&#x7981;&#x7528; Facebook &#x767B;&#x5F55;&#x529F;&#x80FD;&#x3002;</p>
</blockquote>
<h3 id="&#x6DFB;&#x52A0;-dockerfile"><a name="&#x6DFB;&#x52A0;-dockerfile" class="plugin-anchor" href="#&#x6DFB;&#x52A0;-dockerfile"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0; Dockerfile</h3>
<p>&#x9996;&#x5148;&#x9700;&#x8981;&#x7684;&#x5C31;&#x662F;&#x4E00;&#x4E2A; Dockerfile&#xFF0C;&#x5B83;&#x5C31;&#x50CF;&#x4E2A;&#x6E05;&#x5355;&#xFF0C;&#x544A;&#x8BC9; Docker &#x4F60;&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x4E9B;&#x4EC0;&#x4E48;&#x3002;</p>
<p>&#x5728; Web &#x7A0B;&#x5E8F;&#x6839;&#x76EE;&#x5F55;&#x91CC;&#xFF0C;<code>Program.cs</code> &#x65C1;&#x8FB9;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>Dockerfile</code> &#xFF08;&#x6CA1;&#x6709;&#x6269;&#x5C55;&#x540D;&#xFF09;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x7528;&#x4F60;&#x5E38;&#x7528;&#x7684;&#x7F16;&#x8F91;&#x5668;&#x6253;&#x5F00;&#x5B83;&#xFF0C;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x8FD9;&#x884C;&#xFF1A;</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">FROM</span> microsoft/dotnet:latest
</code></pre>
<p>&#x8FD9;&#x544A;&#x77E5; Docker &#x5F00;&#x59CB;&#x521B;&#x5EFA;&#x4F60;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x4EE5;&#x4E00;&#x4E2A;&#x73B0;&#x5B58;&#x7684;&#x5FAE;&#x8F6F;&#x53D1;&#x5E03;&#x7684;&#x955C;&#x50CF;&#x4E3A;&#x57FA;&#x7840;&#x3002;&#x8FD9;&#x5C06;&#x786E;&#x4FDD;&#x5BB9;&#x5668;&#x5305;&#x542B;&#x8FD0;&#x884C; ASP.NET Core &#x5E94;&#x7528;&#x6240;&#x9700;&#x7684;&#x4E00;&#x5207;&#x3002;</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">COPY</span> <span class="bash">. /app
</span></code></pre>
<p><code>COPY</code> &#x6307;&#x4EE4;&#x590D;&#x5236;&#x4F60;&#x672C;&#x5730;&#x76EE;&#x5F55;&#xFF08;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF09;&#x5230; Docker &#x955C;&#x50CF;&#x91CC;&#x7684; <code>/app</code> &#x76EE;&#x5F55;&#x3002;</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">WORKDIR</span> <span class="bash">/app
</span></code></pre>
<p><code>WORKDIR</code> &#x662F; Docker &#x91CC;&#x7684; <code>cd</code>&#x3002;Dockerfile &#x4E2D;&#x4E4B;&#x540E;&#x7684;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x5728;&#x8FD9;&#x4E2A; <code>/app</code> &#x6587;&#x4EF6;&#x5939;&#x5185;&#x6267;&#x884C;&#x3002;</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;restore&quot;</span>]
</span><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;build&quot;</span>]
</span></code></pre>
<p>&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x4F1A;&#x6267;&#x884C; <code>dotnet restore</code>&#xFF08;&#x4E0B;&#x8F7D;&#x7A0B;&#x5E8F;&#x6240;&#x9700;&#x7684; NuGet &#x5305;&#xFF09;&#x548C; <code>dotnet build</code>&#xFF08;&#x7F16;&#x8BD1;&#x7A0B;&#x5E8F;&#xFF09;&#x3002;</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">5000</span>/tcp
</code></pre>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Docker &#x5BB9;&#x5668;&#x4E0D;&#x4F1A;&#x66B4;&#x9732;&#x4EFB;&#x4F55;&#x7F51;&#x7EDC;&#x7AEF;&#x53E3;&#x5230;&#x5916;&#x90E8;&#x3002;&#x4F60;&#x9700;&#x8981;&#x660E;&#x786E;&#x5730;&#x8BA9; Docker &#x77E5;&#x9053;&#x7A0B;&#x5E8F;&#x4F1A;&#x5728;&#x7AEF;&#x53E3; 5000 &#x4E0A;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#xFF08;Kestrel &#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#xFF09;&#x3002;</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">ENV</span> ASPNETCORE_URLS http://*:<span class="hljs-number">5000</span>
</code></pre>
<p><code>ENV</code> &#x6307;&#x4EE4;&#x5728;&#x5BB9;&#x5668;&#x91CC;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3002;<code>ASPNETCORE_URLS</code> &#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x544A;&#x8BC9; ASP.NET Core &#x5E94;&#x8BE5;&#x7ED1;&#x5B9A;&#x5230;&#x54EA;&#x4E2A;&#x7F51;&#x5361;&#x7684;&#x54EA;&#x4E2A;&#x7AEF;&#x53E3;&#x4E0A;&#x3002;</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">ENTRYPOINT</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]
</span></code></pre>
<p>Dockerfile &#x7684;&#x6700;&#x540E;&#x4E00;&#x884C;&#x7528; <code>dotnet run</code> &#x547D;&#x4EE4;&#x542F;&#x52A8;&#x4F60;&#x7684;&#x7A0B;&#x5E8F;&#x3002;Kestrel &#x4F1A;&#x5F00;&#x59CB;&#x5728; 5000 &#x7AEF;&#x53E3;&#x4E0A;&#x8FDB;&#x884C;&#x76D1;&#x542C;&#xFF0C;&#x5C31;&#x50CF;&#x4F60;&#x5728;&#x672C;&#x5730;&#x7535;&#x8111;&#x4E0A;&#x8FD0;&#x884C; <code>dotnet run</code> &#x90A3;&#x6837;&#x3002;</p>
<p>&#x5B8C;&#x6574;&#x7684; Dockerfile &#x770B;&#x8D77;&#x6765;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<p><strong><code>Dockerfile</code></strong></p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">FROM</span> microsoft/dotnet:latest
<span class="hljs-keyword">COPY</span> <span class="bash">. /app
</span><span class="hljs-keyword">WORKDIR</span> <span class="bash">/app
</span><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;restore&quot;</span>]
</span><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;build&quot;</span>]
</span><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">5000</span>/tcp
<span class="hljs-keyword">ENV</span> ASPNETCORE_URLS http://*:<span class="hljs-number">5000</span>
ENTRYPOINT [<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]
</code></pre>
<h3 id="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;"><a name="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;" class="plugin-anchor" href="#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;</h3>
<p>&#x786E;&#x4FDD; Dockerfile &#x5DF2;&#x7ECF;&#x4FDD;&#x5B58;&#x597D;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x7528; <code>docker build</code> &#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF1A;</p>
<pre><code>docker build -t aspnetcoretodo .
</code></pre><p>&#x4E0D;&#x8981;&#x6F0F;&#x6389;&#x7ED3;&#x5C3E;&#x90A3;&#x4E2A;&#x53E5;&#x70B9;&#xFF01;&#x5B83;&#x544A;&#x8BC9; Docker &#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x67E5;&#x627E; Dockerfile&#x3002;</p>
<p>&#x4E00;&#x65E6;&#x955C;&#x50CF;&#x521B;&#x5EFA;&#x5B8C;&#x6210;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8FD0;&#x884C; <code>docker images</code> &#x547D;&#x4EE4;&#x5217;&#x51FA;&#x4F60;&#x672C;&#x5730;&#x7535;&#x8111;&#x4E0A;&#x7684;&#x5168;&#x90E8;&#x955C;&#x50CF;&#x3002;&#x8981;&#x901A;&#x8FC7;&#x5BB9;&#x5668;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x8BF7;&#x6267;&#x884C;&#xFF1A;</p>
<pre><code>docker run -it -p 5000:5000 aspnetcoretodo
</code></pre><p><code>-it</code> &#x6807;&#x8BC6;&#x544A;&#x8BC9; Docker &#x4EE5;&#x4EA4;&#x4E92;&#x6A21;&#x5F0F;&#x8FD0;&#x884C;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x5F53;&#x4F60;&#x60F3;&#x8981;&#x505C;&#x6B62;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6309; <code>Control-C</code>&#x3002;</p>
<h3 id="&#x8BBE;&#x7F6E;-nginx"><a name="&#x8BBE;&#x7F6E;-nginx" class="plugin-anchor" href="#&#x8BBE;&#x7F6E;-nginx"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8BBE;&#x7F6E; Nginx</h3>
<p>&#x5728;&#x672C;&#x7AE0;&#x5F00;&#x5934;&#xFF0C;&#x6211;&#x63D0;&#x5230;&#x8FC7;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x4E00;&#x4E2A; Nginx &#x4E4B;&#x7C7B;&#x7684;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x628A;&#x8BF7;&#x6C42;&#x4EE3;&#x7406;&#x5230; Kestrel &#x4E0A;&#x3002;&#x8FD9;&#x4EF6;&#x4E8B;&#x4E5F;&#x53EF;&#x4EE5;&#x7528; Docker &#x6765;&#x505A;&#x3002;</p>
<p>&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4F1A;&#x5305;&#x62EC;&#x4E24;&#x4E2A;&#x5BB9;&#x5668;&#xFF1A;&#x4E00;&#x4E2A; Nginx &#x5BB9;&#x5668;&#x76D1;&#x542C; 80 &#x7AEF;&#x53E3;&#xFF0C;&#x628A;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x7740; Kestrel &#x5E76;&#x76D1;&#x542C; 5000 &#x7AEF;&#x53E3;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>
<p>Nginx &#x5BB9;&#x5668;&#x81EA;&#x5DF1;&#x4E5F;&#x9700;&#x8981;&#x4E00;&#x4E2A; Dockerfile&#x3002;&#x4E3A;&#x907F;&#x514D;&#x8DDF;&#x4F60;&#x521A;&#x624D;&#x521B;&#x5EFA;&#x90A3;&#x4E2A; Dockerfile &#x51B2;&#x7A81;&#xFF0C;&#x5728; Web &#x7A0B;&#x5E8F;&#x6839;&#x76EE;&#x5F55;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#xFF1A;</p>
<pre><code>mkdir nginx
</code></pre><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; Dockerfile &#x5E76;&#x6DFB;&#x52A0;&#x8FD9;&#x4E9B;&#x884C;&#xFF1A;</p>
<p><strong><code>nginx/Dockerfile</code></strong></p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">FROM</span> nginx
<span class="hljs-keyword">COPY</span> <span class="bash">nginx.conf /etc/nginx/nginx.conf
</span></code></pre>
<p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; <code>nginx.conf</code> &#x6587;&#x4EF6;&#xFF1A;</p>
<p><strong><code>nginx/nginx.conf</code></strong></p>
<pre><code>events { worker_connections 1024; }

http {

        server {
              listen 80;

              location / {
                proxy_pass http://kestrel:5000;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection &apos;keep-alive&apos;;
                proxy_set_header Host $host;
                proxy_cache_bypass $http_upgrade;
              }
        }
}
</code></pre><p>&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x544A;&#x8BC9; Nginx &#x628A;&#x63A5;&#x5230;&#x7684;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230; <code>http://kestrel:5000</code>&#x3002;&#xFF08;&#x4F60;&#x9A6C;&#x4E0A;&#x5C31;&#x4F1A;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528; <code>kestrel:5000</code> &#xFF09;</p>
<h3 id="&#x8BBE;&#x7F6E;-docker-compose"><a name="&#x8BBE;&#x7F6E;-docker-compose" class="plugin-anchor" href="#&#x8BBE;&#x7F6E;-docker-compose"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8BBE;&#x7F6E; Docker Compose</h3>
<p>&#x8FD8;&#x9700;&#x8981;&#x518D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x56DE;&#x5230; Web &#x7A0B;&#x5E8F;&#x7684;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x521B;&#x5EFA; <code>docker-compose.yml</code>&#xFF1A;</p>
<p><strong><code>docker-compose.yml</code></strong></p>
<pre><code class="lang-yaml"><span class="hljs-attr">nginx:</span>
<span class="hljs-attr">    build:</span> ./nginx
<span class="hljs-attr">    links:</span>
<span class="hljs-attr">        - kestrel:</span>kestrel
<span class="hljs-attr">    ports:</span>
<span class="hljs-bullet">        -</span> <span class="hljs-string">&quot;80:80&quot;</span>
<span class="hljs-attr">kestrel:</span>
<span class="hljs-attr">    build:</span> .
<span class="hljs-attr">    ports:</span>
<span class="hljs-bullet">        -</span> <span class="hljs-string">&quot;5000&quot;</span>
</code></pre>
<p>Docker Compose &#x662F;&#x4E2A;&#x5E2E;&#x52A9;&#x4F60;&#x521B;&#x5EFA;&#x5E76;&#x8FD0;&#x884C;&#x591A;&#x5BB9;&#x5668;&#x7A0B;&#x5E8F;&#x7684;&#x5DE5;&#x5177;&#x3002;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B9A;&#x4E49;&#x4E86;&#x4E24;&#x4E2A;&#x5BB9;&#x5668;&#xFF1A; &#x7528; <code>./nginx/Dockerfile</code> &#x6E05;&#x5355;&#x521B;&#x5EFA; <code>nginx</code>&#xFF0C;&#x7528; <code>./Dockerfile</code> &#x521B;&#x5EFA; <code>kestrel</code>&#x3002;&#x8FD9;&#x4E24;&#x4E2A;&#x5BB9;&#x5668;&#x663E;&#x5F0F;&#x5730;&#x94FE;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x4E92;&#x76F8;&#x901A;&#x4FE1;&#x3002;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4EE5;&#x4E0B;&#x6307;&#x4EE4;&#x6765;&#x542F;&#x52A8;&#x8FD9;&#x4E2A;&#x591A;&#x5BB9;&#x5668;&#x7A0B;&#x5E8F;&#xFF1A;</p>
<pre><code>docker-compose up
</code></pre><p>&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x5E76;&#x5BFC;&#x822A;&#x81F3; <code>http://localhost</code>&#xFF08;&#x4E0D;&#x662F; 5000&#xFF01;&#xFF09;&#x3002;Nginx &#x5728; 80 &#xFF08;HTTP &#x7684;&#x9ED8;&#x8BA4;&#xFF09;&#x7AEF;&#x53E3;&#x4E0A;&#x8FDB;&#x884C;&#x76D1;&#x542C;&#xFF0C;&#x5E76;&#x628A;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x7531;  Kestrel &#x6258;&#x7BA1;&#x7684; ASP.NET Core &#x7A0B;&#x5E8F;&#x3002;</p>
<h3 id="&#x642D;&#x5EFA;-docker-&#x670D;&#x52A1;&#x5668;"><a name="&#x642D;&#x5EFA;-docker-&#x670D;&#x52A1;&#x5668;" class="plugin-anchor" href="#&#x642D;&#x5EFA;-docker-&#x670D;&#x52A1;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x642D;&#x5EFA; Docker &#x670D;&#x52A1;&#x5668;</h3>
<p>&#x8BE6;&#x5C3D;&#x7684;&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#x8D85;&#x51FA;&#x4E86;&#x8FD9;&#x672C;<strong>&#x5C0F;</strong>&#x4E66;&#x7684;&#x8303;&#x7574;&#xFF0C;&#x4F46;&#x662F;&#x4EFB;&#x4F55;&#x65B0;&#x5F0F;&#x7684; Linux &#x53D1;&#x884C;&#x7248;&#xFF08;&#x4F8B;&#x5982; Ubuntu&#xFF09;&#x90FD;&#x53EF;&#x4EE5;&#x642D;&#x5EFA;&#x6210;&#x4E00;&#x4E2A; Docker &#x5BBF;&#x4E3B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x7528;&#x4E9A;&#x9A6C;&#x900A; EC2 &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5728;&#x4E0A;&#x9762;&#x5B89;&#x88C5; Docker &#x670D;&#x52A1;&#xFF0C;&#x4E3A;&#x6B64;&#x4F60;&#x53EF;&#x4EE5;&#x641C;&#x7D22; &#x201C;amazon ec2 set up docker&#x201D; &#x4EE5;&#x83B7;&#x53D6;&#x8BF4;&#x660E;&#x3002;</p>
<p>&#x6211;&#x66F4;&#x504F;&#x597D;&#x4F7F;&#x7528; DigitalOcean&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x628A;&#x5165;&#x95E8;&#x7684;&#x95E8;&#x69DB;&#x964D;&#x5F97;&#x975E;&#x5E38;&#x4F4E;&#x3002;DigitalOcean &#x65E2;&#x6709;&#x73B0;&#x6210;&#x7684; Docker &#x865A;&#x62DF;&#x673A;&#xFF0C;&#x4E5F;&#x6709;&#x5173;&#x4E8E;&#x642D;&#x5EFA;&#x548C;&#x8FD0;&#x884C; Docker &#x7684;&#x6DF1;&#x5EA6;&#x6559;&#x7A0B;&#xFF08;&#x641C;&#x7D22;&#x201C;digitalocean docker&#x201D;&#xFF09;&#x3002;</p>
<hr>
<h2 id="deploy-with-docker"><a name="deploy-with-docker" class="plugin-anchor" href="#deploy-with-docker"><i class="fa fa-link" aria-hidden="true"></i></a>Deploy with Docker</h2>
<p>Containerization technologies like Docker can make it much easier to deploy web applications. Instead of spending time configuring a server with the dependencies it needs to run your app, copying files, and restarting processes, you can simply create a Docker image that contains everything your app needs to run, and spin it up as a container on any Docker host.</p>
<p>Docker can make scaling your app across multiple servers easier, too. Once you have an image, using it to create 1 container is the same process as creating 100 containers.</p>
<p>Before you start, you need the Docker CLI installed on your development machine. Search for &quot;get docker for (mac/windows/linux)&quot; and follow the instructions on the official Docker website. You can verify that it&apos;s installed correctly with</p>
<pre><code>docker --version
</code></pre><blockquote>
<p>If you set up Facebook login in the <em>Security and identity</em> chapter, you&apos;ll need to use Docker secrets to securely set the Facebook app secret inside your container. Working with Docker secrets is outside the scope of this book. If you want, you can comment out the <code>AddFacebook</code> line in the <code>ConfigureServices</code> method to disable Facebook log in.</p>
</blockquote>
<h3 id="add-a-dockerfile"><a name="add-a-dockerfile" class="plugin-anchor" href="#add-a-dockerfile"><i class="fa fa-link" aria-hidden="true"></i></a>Add a Dockerfile</h3>
<p>The first thing you&apos;ll need is a Dockerfile, which is like a recipe that tells Docker what your application needs.</p>
<p>Create a file called <code>Dockerfile</code> (no extension) in the web application root, next to <code>Program.cs</code>. Open it in your favorite editor. Write the following line:</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">FROM</span> microsoft/dotnet:latest
</code></pre>
<p>This tells Docker to start your image from an existing image that Microsoft publishes. This will make sure the container has everything it needs to run an ASP.NET Core app.</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">COPY</span> <span class="bash">. /app
</span></code></pre>
<p>The <code>COPY</code> command copies the contents of your local directory (the source code of your application) into a directory called <code>/app</code> in the Docker image.</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">WORKDIR</span> <span class="bash">/app
</span></code></pre>
<p><code>WORKDIR</code> is the Docker equivalent of <code>cd</code>. The remainder of the commands in the Dockerfile will run from inside the <code>/app</code> folder.</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;restore&quot;</span>]
</span><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;build&quot;</span>]
</span></code></pre>
<p>These commands will execute <code>dotnet restore</code> (which downloads the NuGet packages your application needs) and <code>dotnet build</code> (which compiles the application).</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">5000</span>/tcp
</code></pre>
<p>By default, Docker containers don&apos;t expose any network ports to the outside world. You have to explicitly let Docker know that your app will be communicating on port 5000 (the default Kestrel port).</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">ENV</span> ASPNETCORE_URLS http://*:<span class="hljs-number">5000</span>
</code></pre>
<p>The <code>ENV</code> command sets environment variables in the container. The <code>ASPNETCORE_URLS</code> variable tells ASP.NET Core which network interface and port it should bind to.</p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">ENTRYPOINT</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]
</span></code></pre>
<p>The last line of the Dockerfile starts up your application with the <code>dotnet run</code> command. Kestrel will start listening on port 5000, just like it does when you use <code>dotnet run</code> on your local machine.</p>
<p>The full Dockerfile looks like this:</p>
<p><strong><code>Dockerfile</code></strong></p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">FROM</span> microsoft/dotnet:latest
<span class="hljs-keyword">COPY</span> <span class="bash">. /app
</span><span class="hljs-keyword">WORKDIR</span> <span class="bash">/app
</span><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;restore&quot;</span>]
</span><span class="hljs-keyword">RUN</span> <span class="bash">[<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;build&quot;</span>]
</span><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">5000</span>/tcp
<span class="hljs-keyword">ENV</span> ASPNETCORE_URLS http://*:<span class="hljs-number">5000</span>
ENTRYPOINT [<span class="hljs-string">&quot;dotnet&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]
</code></pre>
<h3 id="create-an-image"><a name="create-an-image" class="plugin-anchor" href="#create-an-image"><i class="fa fa-link" aria-hidden="true"></i></a>Create an image</h3>
<p>Make sure the Dockerfile is saved, and then use <code>docker build</code> to create an image:</p>
<pre><code>docker build -t aspnetcoretodo .
</code></pre><p>Don&apos;t miss the trailing period! That tells Docker to look for a Dockerfile in the current directory.</p>
<p>Once the image is created, you can run <code>docker images</code> to to list all the images available on your local machine. To test it out in a container, run</p>
<pre><code>docker run -it -p 5000:5000 aspnetcoretodo
</code></pre><p>The <code>-it</code> flag tells Docker to run the container in interactive mode. When you want to stop the container, press <code>Control-C</code>.</p>
<h3 id="set-up-nginx"><a name="set-up-nginx" class="plugin-anchor" href="#set-up-nginx"><i class="fa fa-link" aria-hidden="true"></i></a>Set up Nginx</h3>
<p>At the beginning of this chapter, I mentioned that you should use a reverse proxy like Nginx to proxy requests to Kestrel. You can use Docker for this, too.</p>
<p>The overall architecture will consist of two containers: an Nginx container listening on port 80, forwarding requests to a separate container running Kestrel and listening on port 5000.</p>
<p>The Nginx container needs its own Dockerfile. To keep it from colliding with the Dockerfile you just created, make a new directory in the web application root:</p>
<pre><code>mkdir nginx
</code></pre><p>Create a new Dockerfile and add these lines:</p>
<p><strong><code>nginx/Dockerfile</code></strong></p>
<pre><code class="lang-dockerfile"><span class="hljs-keyword">FROM</span> nginx
<span class="hljs-keyword">COPY</span> <span class="bash">nginx.conf /etc/nginx/nginx.conf
</span></code></pre>
<p>Next, create an <code>nginx.conf</code> file:</p>
<p><strong><code>nginx/nginx.conf</code></strong></p>
<pre><code>events { worker_connections 1024; }

http {

        server {
              listen 80;

              location / {
                proxy_pass http://kestrel:5000;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection &apos;keep-alive&apos;;
                proxy_set_header Host $host;
                proxy_cache_bypass $http_upgrade;
              }
        }
}
</code></pre><p>This configuration file tells Nginx to proxy incoming requests to <code>http://kestrel:5000</code>. (You&apos;ll see why <code>kestrel:5000</code> works in a moment.)</p>
<h3 id="set-up-docker-compose"><a name="set-up-docker-compose" class="plugin-anchor" href="#set-up-docker-compose"><i class="fa fa-link" aria-hidden="true"></i></a>Set up Docker Compose</h3>
<p>There&apos;s one more file to create. Up in the web application root directory, create <code>docker-compose.yml</code>:</p>
<p><strong><code>docker-compose.yml</code></strong></p>
<pre><code class="lang-yaml"><span class="hljs-attr">nginx:</span>
<span class="hljs-attr">    build:</span> ./nginx
<span class="hljs-attr">    links:</span>
<span class="hljs-attr">        - kestrel:</span>kestrel
<span class="hljs-attr">    ports:</span>
<span class="hljs-bullet">        -</span> <span class="hljs-string">&quot;80:80&quot;</span>
<span class="hljs-attr">kestrel:</span>
<span class="hljs-attr">    build:</span> .
<span class="hljs-attr">    ports:</span>
<span class="hljs-bullet">        -</span> <span class="hljs-string">&quot;5000&quot;</span>
</code></pre>
<p>Docker Compose is a tool that helps you create and run multi-container applications. This configuration file defines two containers: <code>nginx</code> from the <code>./nginx/Dockerfile</code> recipe, and <code>kestrel</code> from the <code>./Dockerfile</code> recipe. The containers are explicitly linked together so they can communicate.</p>
<p>You can try spinning up the entire multi-container application by running:</p>
<pre><code>docker-compose up
</code></pre><p>Try opening a browser and navigating to <code>http://localhost</code> (not 5000!). Nginx is listening on port 80 (the default HTTP port) and proxying requests to your ASP.NET Core application hosted by Kestrel.</p>
<h3 id="set-up-a-docker-server"><a name="set-up-a-docker-server" class="plugin-anchor" href="#set-up-a-docker-server"><i class="fa fa-link" aria-hidden="true"></i></a>Set up a Docker server</h3>
<p>Specific setup instructions are outside the scope of this Little book, but any modern Linux distro (like Ubuntu) can be set up as a Docker host. For example, you could create a virtual machine with Amazon EC2, and install the Docker service. You can search for &quot;amazon ec2 set up docker&quot; (for example) for instructions.</p>
<p>I prefer DigitalOcean because they&apos;ve made it really easy to get started. DigitalOcean has both a pre-built Docker virtual machine, and in-depth tutorials for getting Docker up and running (search for &quot;digitalocean docker&quot;).</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="deploy-to-azure.html" class="navigation navigation-prev " aria-label="Previous page: 部署到 Azure">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../conclusion/" class="navigation navigation-next " aria-label="Next page: 结束语">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"使用 Docker 进行部署","level":"1.9.2","depth":2,"next":{"title":"结束语","level":"1.10","depth":1,"path":"chapters/conclusion/README.md","ref":"chapters/conclusion/README.md","articles":[]},"previous":{"title":"部署到 Azure","level":"1.9.1","depth":2,"path":"chapters/deploy-the-application/deploy-to-azure.md","ref":"chapters/deploy-the-application/deploy-to-azure.md","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters-small","disqus","splitter","anchors","copy-code-button","forkmegithub"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"disqus":{"useIdentifier":false,"shortName":"little-aspnetcore-book-cn"},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"expandable-chapters-small":{},"copy-code-button":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"forkmegithub":{"color":"orange","url":"https://github.com/windsting/little-aspnetcore-book"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","author":"Nate Barbettini","pdf":{"pageNumbers":true,"fontSize":13,"fontFamily":"Microsoft YaHei","paperSize":"b5","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":12,"left":12,"top":12,"bottom":12,"comment_from_windsting":"these margin settings not working."}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"简明 ASP.NET Core 手册","language":"zh-hans","gitbook":"*","description":"一个关于“使用 ASP.NET Core 框架的构建 web 应用程序”的入门简介。"},"file":{"path":"chapters/deploy-the-application/deploy-with-docker.md","mtime":"2018-04-26T03:11:42.916Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-04-28T07:47:03.635Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-forkmegithub/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

